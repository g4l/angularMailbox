"use strict";MailApp.service("MyMails",function($http){this.getAllLetters=function(){return $http.get("https://test-api.javascript.ru/v1/avoznuk2/letters").then(function(response){return response.data})},this.getMailBoxes=function(){return $http.get("https://test-api.javascript.ru/v1/avoznuk2/mailboxes").then(function(response){return response.data})},this.add=function(mail){return $http.post("https://test-api.javascript.ru/v1/avoznuk2/letters",mail).then(function(response){return response.data})}}).config(function($stateProvider){$stateProvider.state("mailbox",{url:"mailbox/:mailboxId",template:'<mailbox mailbox-id="mailboxId"/>',controller:function($stateParams,$scope){$scope.mailboxId=$stateParams.mailboxId}})}).component("mailbox",{bindings:{},templateUrl:"templates/mailboxTemplate.html",controller:function(MyMails,$http){var _this=this;MyMails.getAllLetters().then(function(mails){_this.mails=mails}),this.getLetters=function(id){_this.letters=_this.mails.filter(function(mail){return mail.mailbox==id})},MyMails.getMailBoxes().then(function(mailboxes){_this.mailboxes=mailboxes}),this.addMail=function(){var newMail={subject:_this.newSubject.trim(),body:_this.newBody.trim(),to:_this.newTo.trim(),mailbox:_this.mailboxes[1]._id};newMail.subject&&newMail.body&&newMail.to&&MyMails.add(newMail).then(function(mail){_this.mails.push(mail),_this.newSubject=_this.newBody=_this.newBody=_this.newTo=""})}}}).component("mailview",{bindings:{letter:"<"},templateUrl:"templates/letterItem.html"}),MailApp.service("MyUserCarts",function($http){this.getAll=function(){return $http.get("https://test-api.javascript.ru/v1/avoznuk2/users").then(function(response){return response.data})},this.add=function(user){return $http.post("https://test-api.javascript.ru/v1/avoznuk2/users",user).then(function(response){return response.data})},this.remove=function(user){return $http.delete("https://test-api.javascript.ru/v1/avoznuk2/users/"+user._id)}}).component("userCart",{templateUrl:"templates/userCardTemplate.html",controller:function(MyUserCarts,$http){var _this2=this;MyUserCarts.getAll().then(function(users){return _this2.users=users}),this.addUser=function(){var newUser={fullName:_this2.newFullName.trim(),email:_this2.newEmail.trim(),avatarUrl:_this2.newAvatarUrl.trim(),birthdate:_this2.newBirthdate.trim(),gender:_this2.newGender.trim(),address:_this2.newAddress.trim()};newUser.fullName&&newUser.email&&MyUserCarts.add(newUser).then(function(user){_this2.users.push(user),_this2.newFullName=_this2.newEmail=_this2.newAvatarUrl=_this2.newBirthdate=_this2.newGender=_this2.newAddress=""})},this.removeUser=function(user){MyUserCarts.remove(user).then(function(){_this2.users.splice(_this2.users.indexOf(user),1)})}}}).component("userCartItem",{bindings:{user:"<",remove:"&"},templateUrl:"templates/userItemTemplate.html"});